# 微信小程序
## 毕设第二周总结
#### 本周主要完成了考勤系统除了签到接口外其他所有接口，包括学生和老师的微信端和服务器端
## 遇到的问题
#### 在此阶段主要的问题有两个，
https证书兼容性和mongoDB数据库内嵌文档深层次修改。
## 解决
#### 证书兼容性
#### 问题
在搭建小程序所需要的https服务器时，需要进行https证书的申请。首先在腾讯云上申请的证书，由于不兼容Android4.4以下版本，所以造成部分机型出现ssl握手失败错误。
#### 解决办法
首先使用了nginx服务器解决了TLS多版本支持，但是任然不能解决兼容性问题，之后在七牛云上申请另外一个证书，在nginx上做了一个双证书，解决了兼容性问题。
### mongodb内嵌文档深层次修改
#### 问题
由于数据库设计的问题，出现了多层数组对象嵌套的子文档，对于查询和子文档的更新及其不方便和困难。
#### 解决办法
首先修改了数据库的设计格式，然后查阅mongoDB文档和阅读mongodb权威指南了解到内嵌文档处理办法，解决该问题，但不是完美解决，因为仍存在嵌套层次在3层以上的问题，现在想到的办法有两个：
##### 1、继续修改数据库文档设计，（不是最优）
##### 2、继续查询文档和书籍进行深入研究
